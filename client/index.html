<!DOCTYPE html>
<html>

<head>
    <title>Back End Assessment</title>
</head>

<body class="container">
    <button id="complimentButton">Get a compliment</button>
    <button id="fortune">Get a fortune</button>
    <form id="form">
        <label for="goal">Add a goal</label>
        <input id="goal" type="text" name="goal" placeholder="Enter Goal Here">
        <input type="submit" id=goals>
    </form>
    <button id="showGoals">Show all goals</button>
    </div>

    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script>
        document.getElementById("complimentButton").onclick = function() {
            axios.get("http://localhost:4000/api/compliment/")
                .then(function(response) {
                    const data = response.data;
                    alert(data);
                });
        };

        document.getElementById("fortune").onclick = function() {
            axios.get("http://localhost:4000/api/fortune/")
                .then(function(response) {
                    const data = response.data;
                    alert(data);
                });
        };

        const goalURL = "http://localhost:4000/api/goals"

        const confirmGoal = ({
            data: goal
        }) => alert(`your goal of ${goal} has been added`);

        const createGoal = body => axios.post(goalURL, body).then(confirmGoal);
        const form = document.querySelector("form");

        function submitHandler(e) {
            e.preventDefault();

            let goal = document.querySelector("#goal");

            let bodyObj = {
                goal: goal.value
            };

            createGoal(bodyObj);

            goal.value = "";
        };
        form.addEventListener('submit', submitHandler)

        document.getElementById("showGoals").onclick = function() {
            axios.get(goalURL)
                .then(function(response) {
                    const data = response.data;
                    alert(data);
                });
        };
    </script>
</body>

</html>